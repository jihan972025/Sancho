<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sancho</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }
    .container {
      text-align: center;
      animation: fadeIn 0.4s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .logo {
      width: 72px; height: 72px;
      border-radius: 12px;
      background: rgba(92, 124, 250, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }
    .logo img {
      width: 48px; height: 48px;
      border-radius: 8px;
    }
    h1 {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #e2e8f0;
    }
    .status {
      font-size: 13px;
      color: #64748b;
      margin-bottom: 28px;
    }
    .spinner {
      width: 32px; height: 32px;
      border: 2.5px solid rgba(92, 124, 250, 0.2);
      border-top-color: #5c7cfa;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .steps {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 24px;
    }
    .step {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 12px;
      color: #475569;
      transition: color 0.3s;
    }
    .step.active { color: #94a3b8; }
    .step.done { color: #4ade80; }
    .dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: #334155;
      transition: background 0.3s;
    }
    .step.active .dot { background: #5c7cfa; animation: pulse 1s ease-in-out infinite; }
    .step.done .dot { background: #4ade80; }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="data:image/png;base64,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" alt="Sancho" />
    </div>
    <h1>Sancho</h1>
    <div class="spinner"></div>
    <p class="status" id="statusText">Starting up...</p>
    <div class="steps">
      <div class="step" id="stepBackend"><span class="dot"></span>Backend server</div>
      <div class="step" id="stepFrontend"><span class="dot"></span>Frontend</div>
    </div>
  </div>
  <script>
    const statusText = document.getElementById('statusText')
    const stepBackend = document.getElementById('stepBackend')
    const stepFrontend = document.getElementById('stepFrontend')

    let backendReady = false
    let frontendReady = false

    function updateStatus() {
      if (!backendReady) {
        statusText.textContent = 'Connecting to backend...'
        stepBackend.className = 'step active'
      } else if (!frontendReady) {
        statusText.textContent = 'Loading frontend...'
        stepBackend.className = 'step done'
        stepFrontend.className = 'step active'
      } else {
        statusText.textContent = 'Ready!'
        stepBackend.className = 'step done'
        stepFrontend.className = 'step done'
      }
    }

    // Use image probe â€” works from file:// without CORS issues
    function probeUrl(url) {
      return new Promise((resolve) => {
        const img = new Image()
        const timer = setTimeout(() => { img.src = ''; resolve(false) }, 2000)
        // Servers return non-image responses which trigger onerror,
        // but a TCP connection success means the server is up.
        // Use XMLHttpRequest as primary, img probe as fallback.
        const xhr = new XMLHttpRequest()
        xhr.open('GET', url, true)
        xhr.timeout = 2000
        xhr.onload = () => { clearTimeout(timer); resolve(xhr.status >= 200 && xhr.status < 400) }
        xhr.onerror = () => { clearTimeout(timer); resolve(false) }
        xhr.ontimeout = () => { clearTimeout(timer); resolve(false) }
        xhr.send()
      })
    }

    async function checkBackend() {
      if (await probeUrl('http://127.0.0.1:8765/api/health')) {
        backendReady = true
        updateStatus()
      }
    }

    async function checkFrontend() {
      if (await probeUrl('http://localhost:5173/')) {
        frontendReady = true
        updateStatus()
      }
    }

    async function poll() {
      updateStatus()
      while (!backendReady || !frontendReady) {
        await Promise.all([
          !backendReady ? checkBackend() : Promise.resolve(),
          !frontendReady ? checkFrontend() : Promise.resolve(),
        ])
        if (backendReady && frontendReady) break
        await new Promise(r => setTimeout(r, 500))
      }
      // Small delay for smooth transition
      await new Promise(r => setTimeout(r, 300))
      window.location.href = 'http://localhost:5173'
    }

    poll()
  </script>
</body>
</html>
